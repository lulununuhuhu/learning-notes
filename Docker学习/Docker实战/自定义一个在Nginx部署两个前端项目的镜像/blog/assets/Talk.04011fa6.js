import{_ as I}from"./CommentList.a6fb4591.js";import{d as D,X as M,u as V,L as j,n as H,p as O,j as R,v as u,c as n,b as e,e as o,h as t,f as p,t as m,x as k,F as g,g as W,z as v,N as $,_ as E,B as G,C as X,o as i,a4 as Y,$ as q,i as A}from"./index.e34733fd.js";import{_ as J}from"./index.141961df.js";import{b as K,l as P}from"./index.aeba2f96.js";import"./index.aed2b079.js";const h=c=>(G("data-v-b2055b67"),c=c(),X(),c),Q={class:"page-header"},U=h(()=>e("h1",{class:"page-title"},"\u8BF4\u8BF4",-1)),Z=h(()=>e("img",{class:"page-cover",src:"https://ik.imagekit.io/nicexl/Wallpaper/ba41a32b219e4b40ad055bbb52935896_Y0819msuI.jpg",alt:""},null,-1)),ee={class:"bg"},te={key:0,class:"page-container"},se={class:"talk-item"},ae={class:"talk-meta"},ne=["src"],oe={class:"talk-content-wrap"},ie={class:"talk-info"},ce={class:"talk-user-name"},le={class:"talk-time"},_e=["innerHTML"],me={key:0,class:"talk-image"},re={class:"info",style:{"margin-top":"0.5rem"}},de={class:"talk-comment info"},pe=D({__name:"Talk",setup(c){const f=M(),{user:l,app:C}=V(),b=j(()=>a=>l.talkLikeSet.indexOf(a)!=-1?"like-flag":""),y=H({commentCount:0,commentType:3,talk:{id:0,nickname:"",avatar:"",talkContent:"",imgList:[],isTop:0,likeCount:0,commentCount:0,createTime:""}}),{commentCount:r,commentType:T,talk:s}=O(y),L=a=>{r.value=a},x=()=>{if(!l.id){C.setLoginFlag(!0);return}let a=s.value.id;P(a).then(({data:_})=>{_.flag&&(l.talkLikeSet.indexOf(a)!=-1?s.value.likeCount-=1:s.value.likeCount+=1,l.talkLike(a))})};return R(()=>{K(Number(f.params.id)).then(({data:a})=>{s.value=a.data})}),(a,_)=>{const S=J,d=E,w=I,z=u("lazy"),B=u("viewer");return i(),n(g,null,[e("div",Q,[U,Z,o(S)]),e("div",ee,[t(s)?(i(),n("div",te,[e("div",se,[e("div",ae,[e("img",{class:"user-avatar",src:t(s).avatar},null,8,ne)]),e("div",oe,[e("div",ie,[e("span",ce,[p(m(t(s).nickname),1),o(d,{"icon-class":"badge",style:{"margin-left":"0.4rem"}})]),e("span",le,m(t(Y)(t(s).createTime)),1)]),e("div",{class:"talk-content",innerHTML:t(s).talkContent},null,8,_e),t(s).imgList?k((i(),n("div",me,[(i(!0),n(g,null,W(t(s).imgList,(N,F)=>k((i(),n("img",{onClick:_[0]||(_[0]=q(()=>{},["prevent"])),class:"image",key:F})),[[z,N]])),128))])),[[B]]):v("",!0),e("div",re,[e("span",{class:"talk-like info",onClick:x},[o(d,{"icon-class":"like",size:"0.8rem",class:$(t(b)(t(s).id)),style:{"margin-right":"5px"}},null,8,["class"]),p(" "+m(t(s).likeCount),1)]),e("span",de,[o(d,{"icon-class":"comment",size:"0.9rem",style:{"margin-right":"5px"}}),p(" "+m(t(r)==null?0:t(r)),1)])])])]),o(w,{"comment-type":t(T),onGetCommentCount:L},null,8,["comment-type"])])):v("",!0)])],64)}}});const fe=A(pe,[["__scopeId","data-v-b2055b67"]]);export{fe as default};
