import{a3 as _,d as Z,r as W,e as U,N as Y,A as ee,v as L,O as te,o as b,c as ae,Q as T,R as oe,x as o,i as t,w as a,k as le,z as p,l as A,S as R,J as $,j as E,t as ne,K as ue,U as k,T as re,E as ie,f as se,g as de,h as ce,G as me,H as pe,X as fe,Z as ge,a1 as _e,a2 as ye,an as ve}from"./index.96097f3e.js";/* empty css                   *//* empty css                        *//* empty css               */import{f as Ce}from"./date.f8742d84.js";function Fe(i){return _({url:"/admin/category/list",method:"get",params:i})}function he(i){return _({url:"/admin/category/delete",method:"delete",data:i})}function we(i){return _({url:"/admin/category/add",method:"post",data:i})}function be(i){return _({url:"/admin/category/update",method:"put",data:i})}const Ee={class:"app-container"},ke={class:"create-time"},Be={style:{"margin-left":"10px"}},De={class:"dialog-footer"},Le=Z({__name:"index",setup(i){const y=W(),I=U({categoryName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",trigger:"blur"}]}),q=U({count:0,showSearch:!0,loading:!1,title:"",addOrUpdate:!1,queryParams:{current:1,size:10},categoryForm:{id:void 0,categoryName:""},categoryIdList:[],categoryList:[]}),{count:v,showSearch:g,loading:C,title:F,addOrUpdate:d,queryParams:r,categoryForm:s,categoryIdList:h,categoryList:B}=Y(q),z=n=>{h.value=n.map(e=>e.id)},D=n=>{var e;(e=y.value)==null||e.clearValidate(),n!==void 0?(F.value="\u4FEE\u6539\u5206\u7C7B",s.value={id:n.id,categoryName:n.categoryName}):(F.value="\u6DFB\u52A0\u5206\u7C7B",s.value={id:void 0,categoryName:""}),d.value=!0},K=()=>{var n;(n=y.value)==null||n.validate(e=>{e&&(s.value.id!==void 0?be(s.value).then(({data:u})=>{u.flag&&(k(u.msg),c()),d.value=!1}):we(s.value).then(({data:u})=>{u.flag&&(k(u.msg),c()),d.value=!1}))})},N=n=>{let e=[];n==null?e=h.value:e=[n],re("\u786E\u8BA4\u5220\u9664\u5DF2\u9009\u4E2D\u7684\u6570\u636E\u9879?").then(()=>{he(e).then(({data:u})=>{u.flag&&(k(u.msg),c())})}).catch(()=>{})},c=()=>{C.value=!0,Fe(r.value).then(({data:n})=>{B.value=n.data.recordList,v.value=n.data.count,C.value=!1})},S=()=>{r.value.current=1,c()};return ee(()=>{c()}),(n,e)=>{const u=ie,w=se,m=de,V=ce,x=me,P=L("right-toolbar"),M=pe,f=fe,O=L("clock"),Q=ge,j=_e,G=ye,H=ve,J=te;return b(),ae("div",Ee,[T(t(V,{onSubmit:e[1]||(e[1]=A(()=>{},["prevent"])),model:o(r),inline:!0},{default:a(()=>[t(w,{label:"\u5206\u7C7B\u540D\u79F0"},{default:a(()=>[t(u,{onKeyup:le(S,["enter"]),modelValue:o(r).keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>o(r).keyword=l),style:{width:"200px"},placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:""},null,8,["onKeyup","modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(m,{type:"primary",icon:"Search",onClick:S},{default:a(()=>[p("\u641C\u7D22")]),_:1})]),_:1})]),_:1},8,["model"]),[[oe,o(g)]]),t(M,{gutter:10,class:"mb15"},{default:a(()=>[t(x,{span:1.5},{default:a(()=>[t(m,{type:"primary",plain:"",icon:"Plus",onClick:e[2]||(e[2]=l=>D(void 0))},{default:a(()=>[p("\u65B0\u589E")]),_:1})]),_:1}),t(x,{span:1.5},{default:a(()=>[t(m,{type:"danger",plain:"",disabled:o(h).length===0,icon:"Delete",onClick:e[3]||(e[3]=l=>N(void 0))},{default:a(()=>[p("\u6279\u91CF\u5220\u9664")]),_:1},8,["disabled"])]),_:1}),t(P,{showSearch:o(g),"onUpdate:showSearch":e[4]||(e[4]=l=>R(g)?g.value=l:null),onQueryTable:c},null,8,["showSearch"])]),_:1}),T((b(),$(j,{border:"",data:o(B),onSelectionChange:z},{default:a(()=>[t(f,{type:"selection",width:"55",align:"center"}),t(f,{prop:"categoryName",width:"300",label:"\u5206\u7C7B\u540D",align:"center"}),t(f,{prop:"articleCount",label:"\u6587\u7AE0\u91CF",align:"center"}),t(f,{prop:"createTime",width:"300",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{default:a(l=>[E("div",ke,[t(Q,null,{default:a(()=>[t(O)]),_:1}),E("span",Be,ne(o(Ce)(l.row.createTime)),1)])]),_:1}),t(f,{width:"300",label:"\u64CD\u4F5C",align:"center"},{default:a(l=>[t(m,{type:"primary",icon:"Edit",link:"",onClick:X=>D(l.row)},{default:a(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),t(m,{type:"danger",icon:"Delete",link:"",onClick:X=>N(l.row.id)},{default:a(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,o(C)]]),o(v)>0?(b(),$(G,{key:0,total:o(v),page:o(r).current,"onUpdate:page":e[5]||(e[5]=l=>o(r).current=l),limit:o(r).size,"onUpdate:limit":e[6]||(e[6]=l=>o(r).size=l),onPagination:c},null,8,["total","page","limit"])):ue("",!0),t(H,{title:o(F),modelValue:o(d),"onUpdate:modelValue":e[10]||(e[10]=l=>R(d)?d.value=l:null),width:"500px","append-to-body":""},{footer:a(()=>[E("div",De,[t(m,{type:"primary",onClick:K},{default:a(()=>[p("\u786E \u5B9A")]),_:1}),t(m,{onClick:e[9]||(e[9]=l=>d.value=!1)},{default:a(()=>[p("\u53D6 \u6D88")]),_:1})])]),default:a(()=>[t(V,{ref_key:"categoryFormRef",ref:y,"label-width":"100px",model:o(s),rules:I,onSubmit:e[8]||(e[8]=A(()=>{},["prevent"]))},{default:a(()=>[t(w,{label:"\u5206\u7C7B\u540D\u79F0",prop:"categoryName"},{default:a(()=>[t(u,{placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",modelValue:o(s).categoryName,"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).categoryName=l),style:{width:"250px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Le as default};
